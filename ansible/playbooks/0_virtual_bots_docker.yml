---
- name: Bring up virtual bots
  hosts: localhost
  vars:
    # container_image: "ghcr.io/dr-qp/jazzy-ros-deploy:edge"
    container_image: "ros:jazzy-ros-base"
  tasks:
    - name: Pull the base image
      community.docker.docker_image:
        name: "{{ container_image }}"
        source: pull

    - name: Create and start containers
      community.docker.docker_container:
        name: "{{ item }}"
        image: "{{ container_image }}"
        state: started
        detach: true
        command: sleep infinity
      loop: "{{ groups['virtual_bots'] | default([]) }}"
